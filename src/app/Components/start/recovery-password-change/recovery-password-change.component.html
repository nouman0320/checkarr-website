<app-loading></app-loading>


<div *ngIf="this.accountService.isTokenValidationComplete && !this.accountService.networkProblem">


  <nav class="navbar fixed-top navbar-expand-lg navbar-light welcome_nav">
    <a class="navbar-brand navbar_item_color"  (click)="cancel()">
      <div class="logo_crop">
          <img src="/assets/images/Checkarr_logo_transparent.png" class="main_logo">
      </div>
      
    </a>
  </nav>


  <div class="password_change_div">
      
    <div class="password_change_content_div">
      
      <div [hidden]="passwordChanged">
        
        <h4 style="margin-top: 25px;margin-left: 35px">Change password</h4>
        <p style="padding-left: 35px; padding-right: 35px; margin-top: 5px">You're about to change your password. Always try to not use the same password on every website.</p>
  
        <input class="form-control register_input" 
                  type="password" 
                  placeholder="New password"
                  ngModel
                  name="password"
                  required
                  #passwordControl="ngModel"
                  minlength="6"
                  maxlength="25"
                 
                  style="width: 320px; margin-top: 30px; margin-left: 140px"
                  [ngClass]="{'invalid-form-control': (passwordControl.dirty && !passwordControl.valid)}"                     
          >

          <p [hidden]="passwordControl.valid" style="color:red; font-size: 10px; margin-left: 150px; margin-top: 5px">Length of password should be between 6-25</p>
          <p [hidden]="!requestError" style="color:red; font-size: 10px; margin-left: 150px; margin-top: 5px">{{error}}</p>
          <p [hidden]="!passwordChanged" style="color:green; font-size: 10px; margin-left: 150px; margin-top: 5px">Password updated successfully</p>


          <button [disabled]="progressbar || !passwordControl.valid" (click)="changePassword(passwordControl.value)" style="margin-top:12px;margin-left: 140px" class="btn btn-danger">Change</button>
          <button [disabled]="progressbar" (click)="cancel()" class="btn btn-link" style="margin-top:12px;text-decoration: none; color: grey;margin-left: 15px">Cancel</button>
          <p [hidden]="!progressbar"  style="width: 200px; margin-top: 30px;margin-left: 200px"><ngb-progressbar type="danger" [value]="100" [striped]="true" [animated]="true" height="6px"></ngb-progressbar></p>
      </div>



      <div [hidden]="!passwordChanged" style="text-align: center">
        <h4 style="margin-top: 100px">Password has been changed</h4>
        <button class="btn btn-danger" style="margin-top: 15px;" (click)="cancel()">Login</button>
      </div>


    </div>
  </div>

</div>